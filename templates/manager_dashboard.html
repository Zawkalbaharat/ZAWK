<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¯ÙŠØ± / Manager Requests</title>
    <style>
        body {
            font-family: "Cairo", sans-serif;
            background-color: #fff;
            padding: 20px;
        }
        h2 { color: #2e7d32; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }
        .status {
            font-weight: bold;
            padding: 6px 12px;
            border-radius: 6px;
            display: inline-block;
        }
        .status-approved-final { background-color: #006400; color: white; }
        .status-approved        { background-color: #2196F3; color: white; }
        .status-pending         { background-color: #FFEB3B; color: black; }
        .status-rejected        { background-color: #f44336; color: white; }

        button {
            background-color: #2e7d32;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        button:hover {
            background-color: #256428;
        }

        .form-section {
            background-color: #f1f1f1;
            padding: 20px;
            margin-top: 30px;
            border-radius: 10px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        select, input, textarea {
            width: 100%;
            padding: 8px;
            border-radius: 6px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
        }
        .hidden { display: none; }

        .excel-upload {
            margin-top: 30px;
            padding: 20px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            background-color: #f9f9f9;
        }
        .excel-upload input[type="file"] {
            margin-bottom: 10px;
        }
        .excel-upload button {
            background-color: #2196F3;
        }
        .excel-upload a {
            display: inline-block;
            margin-bottom: 10px;
            text-decoration: none;
            color: #0066cc;
        }
    </style>

<!-- âœ… DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
</head>

<body>
<!-- Ø²Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø«Ø§Ø¨Øª -->
<div style="position: fixed; top: 20px; left: 20px; z-index: 9999;">
    <a href="/messages" style="text-decoration: none;">
        <button id="messageBtn" style="background-color: {% if unread_count >= 5 %}#c62828{% elif unread_count > 0 %}#fbc02d{% else %}#4caf50{% endif %};
                                       color: white;
                                       font-weight: bold;
                                       border: none;
                                       padding: 10px 20px;
                                       border-radius: 8px;
                                       font-size: 16px;
                                       box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
            ğŸ“¨ Ø±Ø³Ø§Ø¦Ù„ / Messages
            {% if unread_count > 0 %}
                <span style="background: white; color: black; font-size: 14px; padding: 3px 8px; border-radius: 50%; margin-right: 5px;">
                    {{ unread_count }}
                </span>
            {% endif %}
        </button>
    </a>
</div>
<!-- Ø²Ø± ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† -->
<style>
.fixed-evaluation-btn {
  position: fixed;
  left: 20px;
  top: 90px;
  z-index: 9999;
}

.fixed-evaluation-btn .btn {
  border-radius: 30px;
  padding: 8px 16px;
  font-size: 14px;
  background-color: #ffffff;
  border: 2px solid #198754;
  color: #198754;
  font-weight: bold;
  display: flex;
  align-items: center;
  gap: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.fixed-evaluation-btn .btn:hover {
  background-color: #198754;
  color: white;
}
</style>

<div class="fixed-evaluation-btn">
  <a href="/evaluations" style="text-decoration: none;">
    <button class="btn">
      <i class="fas fa-chart-line"></i> ğŸ“ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† / Evaluations
    </button>
  </a>
</div>


<h2>
  Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¯ÙŠØ± / Manager Requests
</h2>

<!-- Ø²Ø± Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† -->
<a href="/manage_employees" style="text-decoration: none;">
  <button class="btn" style="border: 2px solid #198754; background-color: #ffffff; color: #198754;">
    <i class="fas fa-users"></i> ğŸ‘¥ Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† / Employee File
  </button>
</a>

<a href="/manager_vacations">
  <button class="tab-button"
    style="
      background-color: {% if vacation_pending|length == 0 %}#4caf50
                       {% elif vacation_pending|length <= 5 %}#ffc107
                       {% else %}#f44336{% endif %};
      color: white;
      font-weight: bold;
    ">
    Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© / Vacation Requests
    {% if vacation_pending|length > 0 %}
      ({{ vacation_pending|length }})
    {% endif %}
  </button>
</a>

<a href="/review_two_year_leave" style="text-decoration: none;">
  <button style="background-color: {% if reject_count > 0 %}#c62828{% else %}#2e7d32{% endif %}; 
                  color: white; 
                  padding: 10px 15px; 
                  border: none; 
                  border-radius: 6px; 
                  font-weight: bold; 
                  position: relative; 
                  margin-right: 10px;">
    Ù…ÙˆØ§ÙÙ‚Ø§Øª ØªØ£Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© / Leave Postponement
    {% if reject_count > 0 %}
      <span style="position: absolute; top: -10px; right: -10px; background: yellow; color: black; font-size: 14px; padding: 3px 8px; border-radius: 50%;">
        {{ reject_count }}
      </span>
    {% endif %}
  </button>
</a>
<a href="/employee_view">
    <button style="margin-bottom: 10px; background-color:#4caf50; color:white; border:none; padding:8px 16px; border-radius:6px;">
        ğŸ‘¤ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…ÙˆØ¸Ù
    </button>
</a>

<a href="/logout"><button>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ / Logout</button></a>


  <!-- âœ… ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© -->
  <div class="tab-pane fade show active" id="mainRequests">
       <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø© / Pending Requests</h3>
    <table id="pendingTable">
        <thead>
            <tr>
                <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                <th>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù</th>
                <th>Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©</th>
                <th>Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨</th>
                <th>ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©</th>
                <th>ØªØ§Ø±ÙŠØ® Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©</th>
                <th>ØªÙØ§ØµÙŠÙ„</th>
                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨</th>
                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
            </tr>
        </thead>
        <tbody>
            {% for req in pending_requests %}
                <tr>
                    <td>{{ req['Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨'] }}</td>
                    <td>{{ req['Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù'] }}</td>
                    <td>{{ req['Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©'] }}</td>
                    <td>{{ req['Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨'] }}</td>
                    <td>{{ req.get('ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©', '-') if req['Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨'] == 'Ø¥Ø¬Ø§Ø²Ø©' else '-' }}</td>
                    <td>{{ req.get('ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©', '-') if req['Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨'] == 'Ø¥Ø¬Ø§Ø²Ø©' else '-' }}</td>
                    <td>{{ req['ØªÙØ§ØµÙŠÙ„'] }}</td>
                    <td>{{ req['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨'] }}</td>
                    <td>{{ req['ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰'] }}</td>
                    <td>
                        <span class="status 
                            {% if req['Ø§Ù„Ø­Ø§Ù„Ø©'] == 'Ù…Ù‚Ø¨ÙˆÙ„ Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§' %}
                                status-approved-final
                            {% elif req['Ø§Ù„Ø­Ø§Ù„Ø©'] == 'Ù…Ù‚Ø¨ÙˆÙ„' %}
                                status-approved
                            {% elif req['Ø§Ù„Ø­Ø§Ù„Ø©'] == 'Ù…Ø¹Ù„Ù‚' %}
                                status-pending
                            {% elif 'Ù…Ø±ÙÙˆØ¶' in req['Ø§Ù„Ø­Ø§Ù„Ø©'] %}
                                status-rejected
                            {% endif %}">{{ req['Ø§Ù„Ø­Ø§Ù„Ø©'] }}</span>
                    </td>
                    <td>
                        <form method="POST" action="/manager_action">
                            <input type="hidden" name="index" value="{{ loop.index0 }}">
                            <button type="submit" name="action" value="approve" onclick="return confirm('ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©ØŸ')">âœ” Ù…ÙˆØ§ÙÙ‚Ø©</button>
                            <button type="submit" name="action" value="reject" onclick="return confirm('ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø±ÙØ¶ØŸ')">âœ– Ø±ÙØ¶</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙŠ ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„ÙŠÙ‡Ø§ Ø£Ùˆ Ø§Ù„Ø±ÙØ¶ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</h3>
    <table id="approvedTable">
        <thead>
            <tr>
                <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                <th>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù</th>
                <th>Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©</th>
                <th>Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨</th>
                <th>ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©</th>
                <th>ØªØ§Ø±ÙŠØ® Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©</th>
                <th>ØªÙØ§ØµÙŠÙ„</th>
                <th>Ø§Ù„Ù…Ù‚Ø¯Ø§Ø± (Ø³Ø§Ø¹Ø§Øª - Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø®ØµÙ… Ø¨Ø§Ù„Ø±ÙŠØ§Ù„)</th>
                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨</th>
                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</th>
                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
            </tr>
        </thead>
        <tbody>
            {% for req in final_requests %}
                <tr>
                    <td>{{ req['Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨'] }}</td>
                    <td>{{ req['Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù'] }}</td>
                    <td>{{ req['Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©'] }}</td>
                    <td>{{ req['Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨'] }}</td>
                    <td>{{ req.get('ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©', '-') if req['Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨'] == 'Ø¥Ø¬Ø§Ø²Ø©' else '-' }}</td>
                    <td>{{ req.get('ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©', '-') if req['Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨'] == 'Ø¥Ø¬Ø§Ø²Ø©' else '-' }}</td>
                    <td>{{ req['ØªÙØ§ØµÙŠÙ„'] }}</td>
                    <td>{{ req['Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª'] }}</td>
                    <td>{{ req['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨'] }}</td>
                    <td>{{ req['ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰'] }}</td>
                    <td>{{ req['ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©'] }}</td>
                    <td>
                        <span class="status 
                            {% if req['Ø§Ù„Ø­Ø§Ù„Ø©'] == 'Ù…Ù‚Ø¨ÙˆÙ„ Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§' %}
                                status-approved-final
                            {% elif req['Ø§Ù„Ø­Ø§Ù„Ø©'] == 'Ù…Ù‚Ø¨ÙˆÙ„' %}
                                status-approved
                            {% elif 'Ù…Ø±ÙÙˆØ¶' in req['Ø§Ù„Ø­Ø§Ù„Ø©'] %}
                                status-rejected
                            {% endif %}">{{ req['Ø§Ù„Ø­Ø§Ù„Ø©'] }}</span>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
  </div>

  <!-- âœ… ØªØ¨ÙˆÙŠØ¨ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© -->
  <div class="tab-pane fade" id="vacationTab">
  </div>
</div> <!-- Ù†Ù‡Ø§ÙŠØ© .tab-content -->



    <!-- Ù‚Ø³Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© -->
    <div class="form-section">
        <h3>Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ Ø¬Ù…Ø§Ø¹ÙŠ ÙŠØ¯ÙˆÙŠ</h3>
        <form method="POST" action="/submit_manager_bulk_request">
            <label>Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†:</label>
            <select name="employee_ids[]" multiple required>
                {% for emp in employees %}
                    <option value="{{ emp['Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©'] }}">{{ emp['Ø§Ù„Ø§Ø³Ù…'] }} - {{ emp['Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©'] }}</option>
                {% endfor %}
            </select>

            <label>Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨:</label>
            <select name="request_type" onchange="toggleFields()" required>
                <option value="">-- Ø§Ø®ØªØ± --</option>
                <option value="Ø¥Ø¬Ø§Ø²Ø©">Ø¥Ø¬Ø§Ø²Ø©</option>
                <option value="Ø§Ø³ØªØ¦Ø°Ø§Ù†">Ø§Ø³ØªØ¦Ø°Ø§Ù†</option>
                <option value="Ø£Ø¬Ø± Ø¹Ù…Ù„ Ø¥Ø¶Ø§ÙÙŠ">Ø£Ø¬Ø± Ø¹Ù…Ù„ Ø¥Ø¶Ø§ÙÙŠ</option>
                <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
                <option value="Ø®ØµÙ…">Ø®ØµÙ…</option>
            </select>

            <div id="vacation_fields" class="hidden">
                <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:</label>
                <input type="date" name="vacation_start">
                <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©:</label>
                <input type="date" name="vacation_end">
            </div>

            <div id="permission_fields" class="hidden">
                <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ¦Ø°Ø§Ù†:</label>
                <input type="date" name="permission_date">
                <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª:</label>
                <input type="number" name="permission_hours" min="1">
            </div>

            <div id="overtime_fields" class="hidden">
                <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ:</label>
                <input type="date" name="overtime_date">
                <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª:</label>
                <input type="number" name="overtime_hours" min="1">
                
            </div>
           <div id="deduction_fields" class="hidden">
                <label>Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø®ØµÙ…:</label>
             <input type="number" name="deduction_amount" step="0.01" min="0">
            </div>


            <label id="details_label">ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©:</label>
            <textarea name="details" rows="3"></textarea>

            <button type="submit">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ</button>
        </form>
    </div>
<!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØµÙØ­Ø© ÙƒÙ…Ø§ Ù‡ÙŠ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± -->

<script>
$(document).ready(function () {
    $('#vacationPendingTable').DataTable({
        "order": [[0, "desc"]],
        "pageLength": 25,
        "language": {
            "search": "ğŸ” Ø¨Ø­Ø«:",
            "lengthMenu": "Ø¹Ø±Ø¶ _MENU_ Ø·Ù„Ø¨ Ù„ÙƒÙ„ ØµÙØ­Ø©",
            "info": "Ø¹Ø±Ø¶ _START_ Ø¥Ù„Ù‰ _END_ Ù…Ù† Ø£ØµÙ„ _TOTAL_ Ø·Ù„Ø¨",
            "paginate": {
                "first": "Ø§Ù„Ø£ÙˆÙ„",
                "last": "Ø§Ù„Ø£Ø®ÙŠØ±",
                "next": "Ø§Ù„ØªØ§Ù„ÙŠ",
                "previous": "Ø§Ù„Ø³Ø§Ø¨Ù‚"
            },
            "zeroRecords": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬",
            "infoEmpty": "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§"
        }
    });
    $('#vacationConfirmedTable').DataTable({
        "order": [[0, "desc"]],
        "pageLength": 25,
        "language": {
            "search": "ğŸ” Ø¨Ø­Ø«:",
            "lengthMenu": "Ø¹Ø±Ø¶ _MENU_ Ø·Ù„Ø¨ Ù„ÙƒÙ„ ØµÙØ­Ø©",
            "info": "Ø¹Ø±Ø¶ _START_ Ø¥Ù„Ù‰ _END_ Ù…Ù† Ø£ØµÙ„ _TOTAL_ Ø·Ù„Ø¨",
            "paginate": {
                "first": "Ø§Ù„Ø£ÙˆÙ„",
                "last": "Ø§Ù„Ø£Ø®ÙŠØ±",
                "next": "Ø§Ù„ØªØ§Ù„ÙŠ",
                "previous": "Ø§Ù„Ø³Ø§Ø¨Ù‚"
            },
            "zeroRecords": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬",
            "infoEmpty": "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§"
        }
    });
});
</script>
<!-- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->

    <!-- Ù‚Ø³Ù… Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ø¥ÙƒØ³Ù„ -->
    <div class="excel-upload">
        <h3>Ø±ÙØ¹ Ø·Ù„Ø¨Ø§Øª Ø¬Ù…Ø§Ø¹ÙŠØ© Ø¹Ø¨Ø± Ù…Ù„Ù Excel</h3>
        <a href="/download_template">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</a><br>
        <form method="POST" action="/upload_excel_requests" enctype="multipart/form-data">
            <input type="file" name="excel_file" accept=".xlsx,.xls" required>
            <button type="submit">ğŸ“ Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù</button>
        </form>
    </div>

    <script>

// âœ… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
document.querySelector("form[action='/submit_manager_bulk_request']").addEventListener("submit", function(event) {
    const type = document.querySelector("select[name='request_type']").value;
    const details = document.querySelector("textarea[name='details']").value.trim();

    if (type === "Ø¥Ø¬Ø§Ø²Ø©") {
        const start = document.querySelector("input[name='vacation_start']").value;
        const end = document.querySelector("input[name='vacation_end']").value;
        if (!start || !end) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© ÙˆÙ†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©.");
            event.preventDefault();
        }
    } else if (type === "Ø§Ø³ØªØ¦Ø°Ø§Ù†") {
        const date = document.querySelector("input[name='permission_date']").value;
        const hours = document.querySelector("input[name='permission_hours']").value;
        if (!date || !hours) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ØªØ§Ø±ÙŠØ® ÙˆØ¹Ø¯Ø¯ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø§Ø³ØªØ¦Ø°Ø§Ù†.");
            event.preventDefault();
        }
    } else if (type === "Ø£Ø¬Ø± Ø¹Ù…Ù„ Ø¥Ø¶Ø§ÙÙŠ") {
        const date = document.querySelector("input[name='overtime_date']").value;
        const hours = document.querySelector("input[name='overtime_hours']").value;
        if (!date || !hours) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ØªØ§Ø±ÙŠØ® ÙˆØ¹Ø¯Ø¯ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ.");
            event.preventDefault();
        }
    } else if (type === "Ø®ØµÙ…") {
        const amount = document.querySelector("input[name='deduction_amount']").value;
        if (!amount || details === "") {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø®ØµÙ… ÙˆØ³Ø¨Ø¨ Ø§Ù„Ø®ØµÙ….");
            event.preventDefault();
        }
    }
});

// âœ… Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø¥Ø¸Ù‡Ø§Ø± ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨
function toggleFields() {
    const allFields = ["vacation_fields", "permission_fields", "overtime_fields", "deduction_fields"];
    allFields.forEach(id => document.getElementById(id).classList.add("hidden"));

    const type = document.querySelector("select[name='request_type']").value;
    const label = document.getElementById("details_label");

    if (type === "Ø¥Ø¬Ø§Ø²Ø©") {
        document.getElementById("vacation_fields").classList.remove("hidden");
        label.innerText = "ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©:";
    } else if (type === "Ø§Ø³ØªØ¦Ø°Ø§Ù†") {
        document.getElementById("permission_fields").classList.remove("hidden");
        label.innerText = "ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©:";
    } else if (type === "Ø£Ø¬Ø± Ø¹Ù…Ù„ Ø¥Ø¶Ø§ÙÙŠ") {
        document.getElementById("overtime_fields").classList.remove("hidden");
        label.innerText = "ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©:";
    } else if (type === "Ø®ØµÙ…") {
        document.getElementById("deduction_fields").classList.remove("hidden");
        label.innerText = "Ø³Ø¨Ø¨ Ø§Ù„Ø®ØµÙ…:";
    } else {
        label.innerText = "ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©:";
    }
}

</script>


<!-- âœ… jQuery and DataTables -->





<!-- âœ… ØªØ­Ù…ÙŠÙ„ jQuery Ø«Ù… DataTables Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<script>
    $(document).ready(function () {
        $('#pendingTable').DataTable({
            "order": [[5, "desc"]],
            "pageLength": 50,
            "language": {
                "search": "ğŸ” Ø¨Ø­Ø«:",
                "lengthMenu": "Ø¹Ø±Ø¶ _MENU_ Ø·Ù„Ø¨ Ù„ÙƒÙ„ ØµÙØ­Ø©",
                "info": "Ø¹Ø±Ø¶ _START_ Ø¥Ù„Ù‰ _END_ Ù…Ù† Ø£ØµÙ„ _TOTAL_ Ø·Ù„Ø¨",
                "paginate": {
                    "first": "Ø§Ù„Ø£ÙˆÙ„",
                    "last": "Ø§Ù„Ø£Ø®ÙŠØ±",
                    "next": "Ø§Ù„ØªØ§Ù„ÙŠ",
                    "previous": "Ø§Ù„Ø³Ø§Ø¨Ù‚"
                },
                "zeroRecords": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬",
                "infoEmpty": "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§"
            }
        });

        $('#approvedTable').DataTable({
            "order": [[5, "desc"]],
            "pageLength": 10,
            "language": {
                "search": "ğŸ” Ø¨Ø­Ø«:",
                "lengthMenu": "Ø¹Ø±Ø¶ _MENU_ Ø·Ù„Ø¨ Ù„ÙƒÙ„ ØµÙØ­Ø©",
                "info": "Ø¹Ø±Ø¶ _START_ Ø¥Ù„Ù‰ _END_ Ù…Ù† Ø£ØµÙ„ _TOTAL_ Ø·Ù„Ø¨",
                "paginate": {
                    "first": "Ø§Ù„Ø£ÙˆÙ„",
                    "last": "Ø§Ù„Ø£Ø®ÙŠØ±",
                    "next": "Ø§Ù„ØªØ§Ù„ÙŠ",
                    "previous": "Ø§Ù„Ø³Ø§Ø¨Ù‚"
                },
                "zeroRecords": "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬",
                "infoEmpty": "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§"
            }
        });
    });
</script>
</body>
</html>
